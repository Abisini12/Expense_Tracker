{% extends 'base.html' %}

{% block content %}
<div class="p-2 d-md-none d-flex" id="sidebar">
    <a href="#" class="text-white" data-bs-toggle="offcanvas" data-bs-target="#sidebar">
        <i class="fa-solid fa-bars" style="margin-right: 10px;"></i>
    </a>
    <span>Budget</span><span class="text-warning">Buddy</span>
</div>
<!-- Graph including -->
<div class="chartCard">
    <h4 style="margin-top: 20px;
    text-shadow: 2px 3px 3px rgba(0, 0, 0, 0.15);
    font-weight: 500;
    color: black;
    /*color: #ff9b1e;*/">Monthly<span
            style="color: rgb(247 29 29); font-size: inherit !important;">Expense</span>Statistics</h4>
    <div class="chartBox" style="height: auto;">
        <canvas id="myChart"></canvas>
    </div>
</div>

<!-- <div class="content">
    <p>
        apologize for any confusion. In the provided HTML code, there is a script that utilizes
        Chart.js, a popular JavaScript library for creating interactive and visually appealing charts.
        However, it seems I overlooked including the Chart.js library in the code.

        To use Chart.js, you need to include the library in your HTML. You can add the following
    </p>
</div> -->


<!-- Display the form with the filter button -->
<div class="data">
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <!-- <a href="/deleteexpense/{{product.id}},{{budget}}"><button class="btn btn-danger">Delete</button></a> -->
        <input type="submit" value="Filter" onclick="/filter_records/">
    </form>
</div>

<div class="page-header " style="text-align: center;">
    <h5>Expenses Report Summary</h5>
</div>
{% if records %}
<div class="page-body">
    <div class="table-responsive">
        <table class="table  table-striped table-bordered">
            <thead class="table-dark">
                <tr>
                <tr>
                    <th>Category</th>
                    <th>Purchase Product</th>
                    <th>Purchase Date</th>
                    <th>Amount Spent</th>
                    <th>Numer of product</th>
                    <th>Bill</th>
                </tr>
                </tr>
            </thead>
            <tbody>
                {% for record in records %}
                <tr>

                    <td>{{ record.category }}</td>
                    <td>{{ record.purchase_product}}</td>
                    <td>{{ record.purchase_date}}</td>
                    <td>{{ record.amount_spent }}</td>
                    <td>{{record.number_of_products}}</td>
                    <!-- <td><a href="D:/Abienv/FirstProject/media/static/{{record.bill_receipt.url}}" target="_blank">View Bill</a></td> -->
                    <td><a href="{{record.bill_receipt.url}}" target="_blank">View Bill</a></td>
                    <!-- Add other columns as needed -->

                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<div class="page-body">
    {% else %}
    <p style="margin-left: 15%;">No records available.</p>
    {% endif %}
</div>

{% endblock %}