{% extends 'base.html' %}

{% block content %}
<head>
  {% load static %}
  <link
    rel="stylesheet"
    href="https://unicons.iconscout.com/release/v4.0.8/css/line.css"
  />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <link rel="stylesheet" href="{% static 'expensecss.css' %}" />
  <title>Expense tracker</title>
</head>
<body>

  <div class="p-2 d-md-none d-flex" id="sidebar">
    <a href="#" class="text-white" data-bs-toggle="offcanvas" data-bs-target="#sidebar">
        <i class="fa-solid fa-bars" style="margin-right: 10px;"></i>
    </a>
    <span>Budget</span><span class="text-warning">Buddy</span>
</div>

  <h4 class="heading">Daily Expense Tracker</h4>
  <div class="wrapper">
    <div class="container">
      <div class="budget_tacker_info">
        <div>
          <span>Expenses</span>
          <h1 id="total_expenses">{{expense}}</h1>
        </div>
        <div>
          <span>Remaining</span>
          <h1 id="remaining_value">{{remaining}}</h1>
        </div>
        <div>
          <span>Total Money</span>
          <h1 id="total">{{budget}}</h1>
        </div>
      </div>
  
      <!-- <div id="warning" style="color: red; font-size: large; align-items: center; display: none;"><p>Expenses is over the budget...</p></div> -->
      <div class="buttonarea">
      <label for="show" class="show-btn mb-0" id="add_product" onclick="toggleContainer()">Add Product</label>
      <button class="save" id="save_product" ><a href="{% url 'saveexpense' %}">Save</a></button>

      </div>
      <div class="container-add">
        <label for="show" class="close-btn fas fa-times" title="close" onclick="toggleContainer(false)"></label>
        <div class="text">Add Expense</div>
        <form method="POST" enctype="multipart/form-data" id="myForm" >
          {% csrf_token %}
          <!-- <div class="row" style="display: grid;
          grid-template-columns: 1fr 1fr;"> -->
          <div class="data">
            <label for="budget">Budget</label>
            <input type="number" id="budget" name="budget">
          </div>
          <div class="data">
            <label for="category" id="categorySelect">Category</label>
            <select id="selectoption" name="categorySelect" style=" height: inherit;
            width: 100%;
            padding-left: 10px;
            font-size: 17px;
            border: 1px solid silver;">
              <option ></option>
              <option id="stationery">Stationery</option>
              <option id="Technology">Technology</option>
              <option id="Groceries">Groceries</option>
              <option id="Cosmetics">Cosmetics</option>
              <option id="Outfits">Outfits</option>
              <option id="Outfits">Others</option>
            </select>
          </div>
        <!-- </div> -->

          <div class="data">
            <label for="product-name">Product Name</label>
            <input type="text" id="product_name" name="product_name">
          </div>
          <div class="data">
            <label for="product-price">Price</label>
            <input type="number" id="product_price" name="product_price">
          </div>
          <div class="data">
            <label for="date">Purchase Date</label>
            <input type="date" id="date" name="date">
          </div>
          <div class="data">
            <label for="numberofproduct">Number of Product</label>
            <input type="number" id="numberofproduct" min="1" max="100000" value="1" name="numberofproduct">
          </div>

          <div class="bill">
            <label> Choose the Bill Receipt to upload: </label>
            <input type="file" name="bill_receipt" accept="image/png, image/jpg, image/jpeg">
          </div>
          <div class="btn">
            <div class="inner"></div>
            <button type="submit"><a href="{% url 'addexpense' %}"></a>Add</button>
          </div>
        </form>

      </div>

      <div class="product_table_and_result">
        <table id="product_table">
          <thead>
            <tr>
              <th>Category</th>
              <th>Product Name</th>
              <th>Price</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for product in product_details %}
            <tr>
              <td>{{product.category}}</td>
              <td>{{ product.purchase_product}}</td>
              <td>{{  product.amount_spent  }}</td>
              <td><a href="/deleteexpense/{{product.id}},{{budget}}"><button class="btn btn-danger">Delete</button></a></td>

            
              <!-- Add other columns as needed -->
            
            
          </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script src="{% static 'jsjsjssample.js' %}"></script>
</body>
{% endblock %}
